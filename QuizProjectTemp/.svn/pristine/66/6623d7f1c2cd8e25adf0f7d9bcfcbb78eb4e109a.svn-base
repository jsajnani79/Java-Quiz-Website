<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
	<%@ page import="Servlets.*" %>
    <%@ page import="java.util.ArrayList" %>
    <%@ page import="QuizProject.UserPackage.MessagePackage.*" %>
    <%@ page import="QuizProject.DBConnection" %>
    <%@ page import="QuizProject.UserPackage.*" %>
    <%@ page import="QuizProject.QuizPackage.*" %>
    <%@ page import="QuizProject.QuestionPackage.*" %>
    <%@ page import="java.util.Set" %>
    <%@ page import="QuizProject.UserPackage.AchievementPackage.*" %>
    
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Initialize User -->
<%	 	User user = (User) session.getAttribute(SessionListener.AUTHENTICATED_USER_KEY); 
		int id = Integer.parseInt(request.getParameter("id"));
		Quiz quiz = new Quiz(id, user.getConnection());
		%>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title><%= quiz.getName()%> Summary</title>
<link rel="stylesheet" href="bootstrap/css/bootstrap.css"/>
<link rel="stylesheet" href="QuizletStylesheet.css"/>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap/js/bootstrap.js"></script>
<style></style>
</head>
<body>

<!-- Print Complete Navigation Bar --> 
<%String fullNavBar = HTMLHelper.generateFullNavBar(); %>
<%= fullNavBar %>

<div id="main">
<h2><%= quiz.getName()%></h2>
<br>
<h3>Quiz Summary</h3>

<!-- Quiz Description -->
<div class="well">
<h4>Quiz Description</h4>
<%=quiz.getDescription() %>
</div>

<!-- Quiz Creator -->
<p>This quiz was created by <%=HTMLHelper.linkforUser(quiz.getCreator()) %></p>

<!-- Initiate Quiz.  -->
<form action=<%=HTMLHelper.linkforQuiz(quiz)%>>
<button type="submit" class="btn btn-default">Start Quiz</button>
</form>
<!-- Initiate Quiz in Practice Mode -->
<button type="submit" class="btn btn-default pull-right">Start Practice Mode</button>
<!-- Edit Quiz, if User is Owner -->

<!-- List of the users past performance on this specific quiz.   -->
<h3>Past Performance</h3>
<div class="panel panel-default">
  <div class="panel-heading">Your Past Performance</div>
  <div class="panel-body">
  <p>You have taken this quiz a total of #TIMES TAKEN times</p>
  </div>
  <!-- Table -->
  <table class="table">
     <thead>
          <tr>
            <th>#</th>
            <th>Score</th>
            <th>Total Time</th>
            <th>Day Taken</th>
          </tr>
        </thead>
        <tbody>
        
          <tr>
            <td>1</td>
            <td>40</td>
            <td>12:01</td>
            <td>12/13/13</td>
          </tr>

        </tbody>
  </table>
</div>

<!-- List of the highest performers of all time.  -->
<div class="panel panel-default">
  <div class="panel-heading">All Time Highest Performers</div>

  <!-- Table -->
  <table class="table">
     <thead>
          <tr>
            <th>#</th>
            <th>User</th>
            <th>Score</th>
            <th>Total Time</th>
            <th>Day Taken</th>
          </tr>
        </thead>
        <tbody>
<%ArrayList<Integer> highestPerformers = quiz.getBestAllTimeScoreIds(); %>        
          <tr>
            <td>1</td>
            <td>Jai</td>
            <td>40</td>
            <td>12:01</td>
            <td>12/13/13</td>
          </tr>

        </tbody>
  </table>
</div>

<!-- List of top performers in the last day. -->
<div class="panel panel-default">
  <div class="panel-heading">Top Performers in the Last Day</div>
  <!-- Table -->
  <table class="table">
     <thead>
          <tr>
            <th>#</th>
            <th>User</th>
            <th>Score</th>
            <th>Total Time</th>
            <th>Day Taken</th>
          </tr>
        </thead>
        <tbody>
        
          <tr>
            <td>1</td>
            <td>Jai</td>            
            <td>40</td>
            <td>12:01</td>
            <td>12/13/13</td>
          </tr>

        </tbody>
  </table>
</div>

<!-- List showing the performance of recent test takers -->
<div class="panel panel-default">
  <div class="panel-heading">Recent User Performance</div>
  <!-- Table -->
  <table class="table">
     <thead>
          <tr>
            <th>#</th>
            <th>User</th>            
            <th>Score</th>
            <th>Total Time</th>
            <th>Day Taken</th>
          </tr>
        </thead>
        <tbody>
        
          <tr>
            <td>1</td>
            <td>Jai</td>            
            <td>40</td>
            <td>12:01</td>
            <td>12/13/13</td>
          </tr>

        </tbody>
  </table>
</div>

<!-- Summary statistics on how well all users have performed on the quiz.  -->
<div class="panel panel-default">
  <div class="panel-heading">Overall Performance Statistics</div>
  <!-- Table -->
  <table class="table">
     <thead>
          <tr>
            <th>#</th>
            <th>User</th>            
            <th>Score</th>
            <th>Total Time</th>
            <th>Day Taken</th>
          </tr>
        </thead>
        <tbody>
        
          <tr>
            <td>1</td>
            <td>Jai</td>            
            <td>40</td>
            <td>12:01</td>
            <td>12/13/13</td>
          </tr>

        </tbody>
  </table>
</div>

</div>


</body>
</html>