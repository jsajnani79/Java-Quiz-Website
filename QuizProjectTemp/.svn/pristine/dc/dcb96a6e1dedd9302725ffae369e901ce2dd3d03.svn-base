<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <%@ page import="QuizProject.DBConnection" %>
    <%@ page import="Servlets.*" %>
    <%@ page import="QuizProject.UserPackage.*" %>
    <%@ page import="QuizProject.QuizPackage.*" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Your Results</title>
<link rel="stylesheet" href="bootstrap/css/bootstrap.css"/>
<link rel="stylesheet" href="QuizletStylesheet.css"/>
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="bootstrap/js/bootstrap.js"></script>
<style>
h1{
text-align: center;
}
</style>
</head>
<body>
<!-- Initialize User -->
<%	 	User user = (User) session.getAttribute(SessionListener.AUTHENTICATED_USER_KEY); 
		QuizSession quizSession = (QuizSession) session.getAttribute(QuizSession.QUIZ_SESSION_ATTRIBUTE_NAME);
%>
<!-- Print Complete Navigation Bar --> 
<%String fullNavBar = HTMLHelper.generateFullNavBar(user); %>
<%= fullNavBar %>
<%int score = Integer.parseInt(request.getParameter("score"));
String time = Utilities.convertLongToTime(quizSession.getDuration());
int id = Integer.parseInt(request.getParameter("id"));
int maxScore = Integer.parseInt(request.getParameter("maxScore"));
%>
<div id = "main">
<div class="jumbotron">
  <h1>Quiz Results</h1>
  <br>
  <p>You have completed this quiz</p>
  <p>Score: <%=quizSession.getScore()%> out of <%=quizSession.getRootQuiz().getMaxScore()%></p>
  <p>Time Taken (hr:min:sec): <%=time%></p>
  <p><a class="btn btn-primary btn-lg" role="button" href="<%= HTMLHelper.hrefForQuizSummary(new Quiz(id,user.getConnection()))%>">Retake Quiz</a>
  
  <!-- <a class="btn btn-primary btn-lg pull-right" role="button">View Detailed Results</a> --></p>
</div>

<form action="RateQuizServlet" method="post">
<input name="id" type="hidden" value="<%=id%>"/>
	<div class="panel panel-default">
	  <div class="panel-heading"> 
	  	<h3 class="panel-title">Rate this quiz</h3>
	  </div>
		<div class="panel-body">
		<div id="questionTable">
			<br>
			<p>Write your review of the quiz here:</p>
		  <textarea class="form-control" maxlength="1000" rows="3" name="ratingText" placeholder="Please enter any comments on the quiz here"></textarea>
		  <p>Select the appropriate rating. 1 is the lowest value. 5 is the highest.</p>
		<div class="row">
		    <div class="col-lg-6">
		    	
		    	<div class="input-group">
		    	<input type="radio" name="rating" value="1" /> 1
		    	</div>
		    	<div class="input-group">
		    	<input type="radio" name="rating" value="2" /> 2
		    	</div>
		    	<div class="input-group">
		    	<input type="radio" name="rating" value="3" /> 3
		    	</div>
		    	<div class="input-group">
		    	<input type="radio" name="rating" value="4" /> 4
		    	</div>
		    	<div class="input-group">
		    	<input type="radio" name="rating" value="5" /> 5
		    	</div>
		    	
		    </div> <!-- col 6 -->
		</div> <!-- row -->
		</div> <!-- questionTable -->
		<button type="submit" class="btn btn-info pull-right" value = "Submit">Submit Rating</button>
		</div>
	</div> <!-- panel -->
</form>

</div> <!-- end of main div -->

</body>
</html>